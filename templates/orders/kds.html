{% extends "orders/base.html" %}

{% block page_content %}
<div class="kds-container">
    <div class="station-tabs">
        {% for station in stations %}
        <a href="/modules/orders/kds/{{ station.id }}/"
           class="station-tab {% if current_station and current_station.id == station.id %}active{% endif %}">
            <ion-icon name="{{ station.icon }}"></ion-icon>
            {{ station.name }}
            {% if station.pending_count > 0 %}
            <span class="badge">{{ station.pending_count }}</span>
            {% endif %}
        </a>
        {% endfor %}
    </div>

    {% if current_station %}
    <div class="kds-items">
        {% for item in items %}
        <div class="kds-card {% if item.is_delayed %}delayed{% endif %}">
            <div class="card-header">
                <span class="order-number">#{{ item.order_number }}</span>
                <span class="table">{{ item.table }}</span>
                <span class="time">{{ item.elapsed_minutes }}min</span>
            </div>
            <div class="card-body">
                <h3>{{ item.quantity }}x {{ item.product_name }}</h3>
                {% if item.modifiers %}<p class="modifiers">{{ item.modifiers }}</p>{% endif %}
                {% if item.notes %}<p class="notes">{{ item.notes }}</p>{% endif %}
            </div>
            <div class="card-actions">
                <button hx-post="/modules/orders/api/items/{{ item.id }}/bump/" class="bump-btn">
                    BUMP
                </button>
            </div>
        </div>
        {% empty %}
        <p class="empty">No pending items for this station</p>
        {% endfor %}
    </div>
    {% else %}
    <p class="select-station">Select a station to view items</p>
    {% endif %}
</div>
{% endblock %}
